<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Chart 2 — Positive Drug Test Rates by Jurisdiction</title>
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <!-- NAVBAR -->
  <div class="nav">
    <div class="container nav__bar">
      <a class="brand" href="index.html">Road<span>Safety</span></a>
      <nav class="nav__links">
        <a href="chart-1.html">Chart 1</a>
        <a href="chart-2.html" class="active">Chart 2</a>
        <a href="chart-3.html">Chart 3</a>
        <a href="chart-4.html">Chart 4</a>
        <a href="chart-5.html">Chart 5</a>
        <a href="chart-6.html">Chart 6</a>
      </nav>
    </div>
  </div>

  <!-- HERO HEADER -->
  <header class="hero chart-header">
    <div class="container centered">
      <h1>Chart 2 · Positive results by jurisdiction</h1>
      <p class="intro">
        This chart compares how each jurisdiction’s positive drug test rates have changed over time,
        highlighting which states consistently show higher or lower detection levels.
      </p>

      <div id="kpi2" class="kpi-grid kpi-grid-hero"></div>

      <div class="pager">
        <a class="btn btn--ghost" href="chart-1.html">← Previous</a>
        <a class="btn btn--brand" href="chart-3.html">Next →</a>
      </div>
    </div>
  </header>

  <!-- MAIN SECTION -->
  <section>
    <div class="container chart-grid">

      <figure class="chart-figure">
        <figcaption class="kicker">
          Question 2. Which jurisdictions have shown the highest or lowest positive drug test rates over time?
        </figcaption>

        <!-- Filter panel -->
        <div class="chart2-filter">

          <!-- Top row: label + chip + all-years pill -->
          <div class="chart-controls-row">
            <span class="chart-label">Year:</span>

            <!-- Wrapper so dropdown is anchored to the chip  -->
            <div class="year-dropdown-wrapper">
              <!-- Year chip -->
              <button id="yearChip2" type="button" class="year-bubble year-chip-btn">
                All years (2008–2024)
              </button>

              <!-- Dropdown panel -->
              <div id="yearDropdown2" class="year-dropdown hidden">
                <div class="dropdown-title"><strong>All years (2008–2024)</strong></div>

                <div class="year-grid">
                  <button class="year-option2" data-year="all">All (2008–2024)</button>
                  <button class="year-option2" data-year="2008">2008</button>
                  <button class="year-option2" data-year="2009">2009</button>
                  <button class="year-option2" data-year="2010">2010</button>
                  <button class="year-option2" data-year="2011">2011</button>
                  <button class="year-option2" data-year="2012">2012</button>
                  <button class="year-option2" data-year="2013">2013</button>
                  <button class="year-option2" data-year="2014">2014</button>
                  <button class="year-option2" data-year="2015">2015</button>
                  <button class="year-option2" data-year="2016">2016</button>
                  <button class="year-option2" data-year="2017">2017</button>
                  <button class="year-option2" data-year="2018">2018</button>
                  <button class="year-option2" data-year="2019">2019</button>
                  <button class="year-option2" data-year="2020">2020</button>
                  <button class="year-option2" data-year="2021">2021</button>
                  <button class="year-option2" data-year="2022">2022</button>
                  <button class="year-option2" data-year="2023">2023</button>
                  <button class="year-option2" data-year="2024">2024</button>
                </div>
              </div>
            </div>

            <!-- All-years pill  -->
            <button id="yearAllBtn2" class="btn btn--ghost btn--pill">
              All years
            </button>
          </div>

          <!-- Slider row -->
          <div class="chart2-slider-row">
            <input
              type="range"
              id="yearSlider2"
              class="year-slider"
              min="2008"
              max="2024"
              step="1"
              value="2024"
            />
          </div>
        </div>

        <!-- Chart container -->
        <div id="chart2"></div>
      </figure>

      <!-- NOTES SECTION -->
      <aside class="notes">
        <h3>Notes & Insights</h3>
        <ul class="list">
          <li>
    Jurisdictions with the highest totals usually have larger populations and
    more frequent roadside drug-testing operations, which increases the number
    of positive detections.
  </li>

  <li>
    Lower-count jurisdictions may simply conduct fewer tests due to smaller
    populations or limited enforcement resources, rather than indicating lower
    drug-impaired driving rates.
  </li>

  <li>
    Year-to-year changes in a state’s values can reflect shifts in police
    strategy, targeted enforcement campaigns, or the introduction of new
    drug-testing initiatives.
  </li>

  <li>
    A spike or drop in a specific year may signal a one-off operation, policy
    change, or external factor (e.g., lockdown periods affecting road activity).
  </li>

  <li>
    Comparing all-year totals highlights long-term patterns, helping identify
    which jurisdictions consistently detect more drug-impaired drivers.
  </li>
        </ul>
      </aside>

    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="container footer">
      <div>© <span id="year2"></span> Road Safety</div>
      <div class="page-dots">
        <a href="chart-1.html">1</a> ·
        <a href="chart-2.html">2</a> ·
        <a href="chart-3.html">3</a> ·
        <a href="chart-4.html">4</a> ·
        <a href="chart-5.html">5</a> ·
        <a href="chart-6.html">6</a>
      </div>
    </div>
  </footer>

  <script>
    document.getElementById('year2').textContent = new Date().getFullYear();
  </script>

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="js/chart2.js"></script>

  <!-- Nav active script -->
  <script>
    const navLinks = document.querySelectorAll('.nav__links a');
    const current = window.location.pathname.split('/').pop() || 'index.html';

    navLinks.forEach(link => {
      const href = link.getAttribute('href');

      
      if (href === current) {
        link.classList.add('active');
      }

      
      link.addEventListener('click', () => {
        navLinks.forEach(l => l.classList.remove('active'));
        link.classList.add('active');
      });
    });
  </script>
</body>
</html>
