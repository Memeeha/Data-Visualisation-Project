<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Chart 5 — Positive Roadside Drug Tests by Age Group</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- Top nav -->
  <div class="nav">
    <div class="container nav__bar">
      <a class="brand" href="index.html">Road<span>Safety</span></a>
      <nav class="nav__links">
        <a href="chart-1.html">Chart 1</a>
        <a href="chart-2.html">Chart 2</a>
        <a href="chart-3.html">Chart 3</a>
        <a href="chart-4.html">Chart 4</a>
        <a href="chart-5.html" class="active">Chart 5</a>
        <a href="chart-6.html">Chart 6</a>
      </nav>
    </div>
  </div>

  <!-- Hero -->
  <header class="hero chart-header">
    <div class="container centered">
      <h1> Chart 5 · Positive roadside drug tests by age group</h1>
      <p class="intro">
        This chart shows how roadside drug test positives are distributed across
        different age groups. Use the year slider or quick year menu to explore
        trends from 2008–2024, or view the combined total for all years.
      </p>

      <!-- KPI cards -->
      <div id="kpi5" class="kpi-grid kpi-grid-hero"></div>

      <div class="pager">
        <a class="btn btn--ghost" href="chart-4.html">← Previous</a>
        <a class="btn btn--brand" href="chart-6.html">Next →</a>
      </div>
    </div>
  </header>

  <!-- Main content -->
  <section>
    <div class="container chart-grid">
      <figure class="chart-figure">
        <figcaption class="kicker">
          Question 5. Which age group recorded the highest number of positive drug detections ?
        </figcaption>

        <!-- Year controls-->
        <div class="chart-controls-row">
          <span class="chart-label">Year:</span>

          <!-- Year chip + dropdown -->
          <div class="year-dropdown-wrapper">
            <button
              id="yearValue5"
              type="button"
              class="year-bubble year-chip-btn"
            >
              All years (2008–2024)
            </button>

            <div id="yearDropdown5" class="year-dropdown hidden">
              <div class="year-dropdown-title">All years (2008–2024)</div>
              <button class="year-option5" data-year="all">
               All (2008–2024)
              </button>
              <div class="year-grid">
                <button class="year-option5" data-year="2008">2008</button>
                <button class="year-option5" data-year="2009">2009</button>
                <button class="year-option5" data-year="2010">2010</button>
                <button class="year-option5" data-year="2011">2011</button>
                <button class="year-option5" data-year="2012">2012</button>
                <button class="year-option5" data-year="2013">2013</button>
                <button class="year-option5" data-year="2014">2014</button>
                <button class="year-option5" data-year="2015">2015</button>
                <button class="year-option5" data-year="2016">2016</button>
                <button class="year-option5" data-year="2017">2017</button>
                <button class="year-option5" data-year="2018">2018</button>
                <button class="year-option5" data-year="2019">2019</button>
                <button class="year-option5" data-year="2020">2020</button>
                <button class="year-option5" data-year="2021">2021</button>
                <button class="year-option5" data-year="2022">2022</button>
                <button class="year-option5" data-year="2023">2023</button>
                <button class="year-option5" data-year="2024">2024</button>
              </div>
            </div>
          </div>

          <!-- External reset button -->
          <button
            id="yearAllBtn5"
            type="button"
            class="btn btn--ghost btn--pill"
          >
            All years 
          </button>
        </div>

        <!-- Slider-->
        <input
          type="range"
          id="yearSlider5"
          class="year-slider"
          min="2008"
          max="2024"
          step="1"
          value="2008"
        />

        <!-- Chart container -->
        <div id="chart5"></div>
      </figure>

      <aside class="notes">
        <h3>Notes &amp; Insights</h3>
        <ul class="list">
          <li>
            Each bar shows how many positive tests came from one age group in the selected year.
          </li>
          <li>
            In the earlier years, the data is grouped as <strong>“All ages”</strong> only, so all age
            groups are combined into one total and cannot be split further.
          </li>
          <li>
            From the later years (up to 2023), the dataset includes separate age bands, so you can see
            which age groups contribute more to positive tests.
          </li>
          <li>
            The <strong>“Unknown”</strong> category means the person’s age was not recorded or was missing
            in the original data, so these positives cannot be placed into a specific age group.
          </li>
          <li>
            Use the year controls to see how the age profile changes over time, and use
            <strong>“All years”</strong> to view the long-term overall pattern.
          </li>
        </ul>
      </aside>

    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container footer">
      <div>© <span id="year5Footer"></span> Road Safety</div>
      <div class="page-dots">
        <a href="chart-1.html">1</a> ·
        <a href="chart-2.html">2</a> ·
        <a href="chart-3.html">3</a> ·
        <a href="chart-4.html">4</a> ·
        <a href="chart-5.html">5</a>.
        <a href="chart-6.html"> 6</a>
      </div>
    </div>
  </footer>

  <script>
    document.getElementById('year5Footer').textContent = new Date().getFullYear();
  </script>

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="js/chart5.js"></script>

  <!-- Nav active script -->
  <script>
    const navLinks = document.querySelectorAll('.nav__links a');
    const current = window.location.pathname.split('/').pop() || 'index.html';

    navLinks.forEach(link => {
      const href = link.getAttribute('href');

      if (href === current) {
        link.classList.add('active');
      }

     
      link.addEventListener('click', () => {
        navLinks.forEach(l => l.classList.remove('active'));
        link.classList.add('active');
      });
    });
  </script>
</body>
</html>
