<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Chart 4 — Enforcement Actions by Jurisdiction</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- Top nav -->
  <div class="nav">
    <div class="container nav__bar">
      <a class="brand" href="index.html">Road<span>Safety</span></a>
      <nav class="nav__links">
        <a href="chart-1.html">Chart 1</a>
        <a href="chart-2.html">Chart 2</a>
        <a href="chart-3.html">Chart 3</a>
        <a href="chart-4.html" class="active">Chart 4</a>
        <a href="chart-5.html">Chart 5</a>
        <a href="chart-6.html">Chart 6</a>
      </nav>
    </div>
  </div>

  <!-- Hero -->
  <header class="hero chart-header">
    <div class="container centered">
      <h1>Chart 4 · Enforcement actions across jurisdictions</h1>
      <p class="intro">
        Compares how many fines, arrests, and charges were recorded for positive roadside
        drug tests, grouped by enforcement action type and coloured by jurisdiction.
      </p>

      <div class="pager">
        <a class="btn btn--ghost" href="chart-3.html">← Previous</a>
        <a class="btn btn--brand" href="chart-5.html">Next →</a>
      </div>
    </div>
  </header>

  <!-- Main section -->
  <section>
    <div class="container chart-grid">
      <figure class="chart-figure">
        <figcaption class="kicker">
          Chart 4 · Fines, arrests, and charges by jurisdiction (2008–2024 total)
        </figcaption>

        <!-- State filter controls -->
        <div class="chart-controls-row">
          <div class="chart-controls-left">
            <span class="chart-label">State:</span>

            <!-- clickable state chip -->
            <button id="jurisValue4" type="button"
                    class="year-bubble year-chip-btn juris-chip-btn">
              All jurisdictions
            </button>

            <!-- Dropdown anchored directly under the state filter chip -->
            <div class="juris-dropdown-wrapper"
                 style="position: relative; display: inline-block;">

              <div id="jurisDropdown4"
                   class="juris-dropdown hidden"
                   style="
                     position: absolute;
                     top: 48px;          /* distance below the chip */
                     left: 0;            /* align left edge with the chip */
                     z-index: 9999;
                   ">

                <button class="juris-option4" data-juris="all">
                  All jurisdictions
                </button>

                <div class="juris-grid">
                  <button class="juris-option4" data-juris="NSW">NSW</button>
                  <button class="juris-option4" data-juris="QLD">QLD</button>
                  <button class="juris-option4" data-juris="WA">WA</button>
                  <button class="juris-option4" data-juris="SA">SA</button>
                  <button class="juris-option4" data-juris="VIC">VIC</button>
                  <button class="juris-option4" data-juris="TAS">TAS</button>
                  <button class="juris-option4" data-juris="NT">NT</button>
                  <button class="juris-option4" data-juris="ACT">ACT</button>
                </div>
              </div>
            </div>

            <!-- external reset button -->
            <button id="jurisReset4" type="button"
                    class="btn btn--ghost btn--pill"
                    style="margin-left: 12px;">
              All jurisdictions
            </button>
          </div>
        </div>

        <!-- Chart container -->
        <div id="chart4"></div>
      </figure>

            <aside class="notes">
        <h3>Notes &amp; Insights</h3>
        <ul class="list">
          <li>
            Fines are usually the highest bar because most positive tests are handled with financial penalties,
            while arrests and charges are used for more serious offences.
          </li>
          <li>
            Jurisdictions with larger totals often have bigger populations, more roadside testing, or stricter
            enforcement policies.
          </li>
          <li>
            When you filter to a single state, look at the shape of the three bars – a very tall fines bar
            suggests a fine-focused approach, while higher arrests or charges indicate tougher follow-up action.
          </li>
          <li>
            Hovering over a bar shows the exact count so you can compare how enforcement style differs between
            states over the whole 2008–2024 period.
          </li>
        </ul>
      </aside>

    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container footer">
      <div>© <span id="year4"></span> Road Safety</div>
      <div class="page-dots">
        <a href="chart-1.html">1</a> ·
        <a href="chart-2.html">2</a> ·
        <a href="chart-3.html">3</a> ·
        <a href="chart-4.html">4</a> ·
        <a href="chart-5.html">5</a> ·
        <a href="chart-6.html">6</a>
      </div>
    </div>
  </footer>

  <script>
    document.getElementById('year4').textContent = new Date().getFullYear();
  </script>

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="js/chart4.js"></script>

  <!-- Nav active script -->
  <script>
    const navLinks = document.querySelectorAll('.nav__links a');
    const current = window.location.pathname.split('/').pop() || 'index.html';

    navLinks.forEach(link => {
      const href = link.getAttribute('href');

      // highlight link that matches current page
      if (href === current) {
        link.classList.add('active');
      }

      // keep click behaviour consistent
      link.addEventListener('click', () => {
        navLinks.forEach(l => l.classList.remove('active'));
        link.classList.add('active');
      });
    });
  </script>
</body>
</html>
